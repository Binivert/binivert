name: GitHub Metrics

on:
  # 1. Trigger manually from the Actions tab
  workflow_dispatch:
  # 2. Trigger automatically every 24 hours
  schedule:
    - cron: "0 0 * * *"

jobs:
  generate-metrics:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      
    steps:
      - name: Generate GitHub Metrics
        uses: lowlighter/metrics@latest
        with:
          # Your GitHub Token
          token: ${{ secrets.METRICS_TOKEN }}
          
          # Output configuration
          filename: metrics.plugin.habits.charts.svg
          config_timezone: Africa/Addis_Ababa
          
          # Base settings (empty because you only want habits)
          base: ""
          
          # Habits Plugin settings
          plugin_habits: yes
          plugin_habits_facts: yes
          plugin_habits_charts: yes
          plugin_habits_trim: yes
